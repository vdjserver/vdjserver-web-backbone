<!-- <link href="../../../styles/modules/_multiselect.css" rel="stylesheet" type="text/css"> -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"> -->
<!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css"> -->

<!--
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js"></script>
-->

<div id="project-groups-detail">
    <div class="row general-table-row general-border-top">
        <div class="col">
            <form method="post" role="form" id="project-repertoire-group-form_{{uuid}}" class="project-repertoire-group-form needs-validation" name="repertoire-group" novalidate>
                <div class="form-row project-repertoire-group-row align-items-center">
                    <div class="form-group col-md-1">
                        <label><b>Actions:</b></label>
                        <div class="btn-group" role="group" aria-label="Button group">
                            <div class="dropdown">
                                <button type="button" class="btn btn-create dropdown-toggle" name="{{uuid}}" id="project-repertoire-group-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-fw fa-user-alt" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                    <button type="button" class="dropdown-item" name="{{uuid}}" id="project-repertoire-group-show-summary" {{#ifEquals view_mode "edit"}}disabled{{/ifEquals}}>
                                        <i class="fas fa-info-circle fa-fw image-vdj-green" aria-hidden="true"></i> Repertoire Group Summary
                                    </button>
                                    <button type="button" class="dropdown-item" name="{{uuid}}" id="project-repertoire-group-copy-uuid">
                                        <i class="fas fa-info-circle fa-fw image-vdj-green" aria-hidden="true"></i> Copy UUID to Clipboard
                                    </button>
                                    <div class="dropdown-divider" width="10%"></div>
                                    <button type="button" class="dropdown-item" name="{{uuid}}" id="project-repertoire-group-edit" {{#ifEquals view_mode "edit"}}disabled{{/ifEquals}}>
                                        <i class="fa fa-plus fa-fw image-vdj-darkblue" aria-hidden="true"></i> Edit Repertoire Group
                                    </button>
                                    <button type="button" class="dropdown-item" name="{{uuid}}" id="project-repertoire-group-duplicate">
                                        <i class="fa fa-copy fa-fw image-vdj-darkblue" aria-hidden="true"></i> Duplicate Repertoire Group
                                    </button>
                                    <button type="button" class="dropdown-item" name="{{uuid}}" id="project-repertoire-group-add-filter">
                                        <i class="fa fa-plus fa-fw image-vdj-darkblue" aria-hidden="true"></i> Add Rearrangement Filter
                                    </button>
                                    <div class="dropdown-divider" width="10%"></div>
                                    <button type="button" class="dropdown-item" name="{{uuid}}" id="project-repertoire-group-delete">
                                        <i class="fa fa-trash fa-fw image-vdj-red" aria-hidden="true"></i> Delete Repertoire Group
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md-2">
                        <label for="repertoire_group_id">
                            <span>
                                <!-- Tooltip -->
                                {{{FieldStar "RepertoireGroup" "repertoire_group_id"}}}
                            </span>
                            <!-- Popover -->
                            {{{FieldHelpPopover "RepertoireGroup" "repertoire_group_id"}}}
                            Repertoire Group ID:
                        </label>
                        <input type="text" class="form-control form-control-repertoire-group" name="repertoire_group_id" id="repertoire_group_id_{{uuid}}" value="{{value.repertoire_group_id}}" {{#ifEquals view_mode "detail"}}readonly{{/ifEquals}} aria-describedby="validationBlankID">
                        <div id="validationBlankID" class="invalid-feedback">
                            Please enter a non-blank, unique Repertoire Group ID.
                        </div>
                    </div>
                    <div class="form-group col-md-9">
                        <label for="repertoire_group_description">Repertoire Group Description</label>
                        <input type="text" class="form-control form-control-repertoire-group" name="repertoire_group_description" id="repertoire_group_description_{{uuid}}" value="{{value.repertoire_group_description}}" {{#ifEquals view_mode "detail"}}readonly{{/ifEquals}}>
                    </div>
                </div>

                <div class="form-row project-repertoire-group-row">
                    <div class="form-group col-md-1">
                        <label for="filter_mode">
                            Type:
                        </label>
                        <select class="custom-select value-select" name="filter_mode" id="filter_mode" {{#ifEquals view_mode "detail"}}disabled{{/ifEquals}}>
                          <option value="Filter" {{#if filter_mode}}selected{{/if}}>Filter</option>
                          <option value="Manual" {{#unless filter_mode}}selected{{/unless}}>Manual</option>
                        </select>
                    </div>

                    <div class="form-group col-md-10" {{#if filter_mode}}hidden{{/if}}>
                        <label for="repertoires">Repertoires</label><br>
                        <select name="repertoires" id="repertoires_{{uuid}}" class="selectpicker form-control" multiple data-live-search="true" data-actions-box="true" data-selected-text-format="count" title="Please select from the following">
                            {{#each rep_list}}
                                <option value="{{this}}">{{this}}</option>
                            <!-- Options will be dynamically added by project-groups-controller.js -->
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group col-md-2" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_field1">Repertoire Filter:</label>
                      <select class="form-control" id="repertoire-groups-logical_field1" data-tuple="{{@index}}">
                          <option></option>
                          <optgroup label="Subject Fields">
                          {{#each subjectFieldNames}}
                          <option value="{{this}}">{{this}}</option>
                          {{/each}}
                          </optgroup>
                          <optgroup label="Sample Fields">
                          {{#each sampleFieldNames}}
                          <option value="{{this}}">{{this}}</option>
                          {{/each}}
                          </optgroup>
                      </select>
                    </div>
                    <div class="form-group col-md-1" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_operator1">Operator:</label>
                      <select class="form-control" id="repertoire-groups-logical_operator1" data-tuple="{{@index}}">
                        <option></option>
                        <option value="=" {{#ifEquals this.value.logical_operator "="}}selected{{/ifEquals}}>=</option>
                        <option value="!=" {{#ifEquals this.value.logical_operator "!="}}selected{{/ifEquals}}>!=</option>
                        <option value=">" {{#ifEquals this.value.logical_operator ">"}}selected{{/ifEquals}}>></option>
                        <option value=">=" {{#ifEquals this.value.logical_operator ">="}}selected{{/ifEquals}}>>=</option>
                        <option value="<" {{#ifEquals this.value.logical_operator "<"}}selected{{/ifEquals}}><</option>
                        <option value="<=" {{#ifEquals this.value.logical_operator "<="}}selected{{/ifEquals}}><=</option>
                        <option value="contains" {{#ifEquals this.value.logical_operator "contains"}}selected{{/ifEquals}}>contains</option>
                      </select>
                    </div>
                    <div class="form-group col-md-1" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_value1">Value:</label>
                        <input type="text" class="form-control" id="repertoire-groups-logical_value1" placeholder="Value" value="{{this.value.logical_value}}" data-tuple="{{@index}}">
                    </div>
                    <div class="form-group col-md-1" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_field">Logical:</label>
                      <select class="form-control" id="repertoire-groups-logical" data-tuple="{{@index}}">
                        <option></option>
                        <option value="AND">AND</option>
                        <option value="OR">OR</option>
                      </select>
                    </div>
                    <div class="form-group col-md-2" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_field2">Repertoire Filter:</label>
                      <select class="form-control" id="repertoire-groups-logical_field2" data-tuple="{{@index}}">
                          <option></option>
                          <optgroup label="Subject Fields">
                          {{#each subjectFieldNames}}
                          <option value="{{this}}">{{this}}</option>
                          {{/each}}
                          </optgroup>
                          <optgroup label="Sample Fields">
                          {{#each sampleFieldNames}}
                          <option value="{{this}}">{{this}}</option>
                          {{/each}}
                          </optgroup>
                      </select>
                    </div>
                    <div class="form-group col-md-1" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_operator2">Operator:</label>
                      <select class="form-control" id="repertoire-groups-logical_operator2" data-tuple="{{@index}}">
                        <option></option>
                        <option value="=" {{#ifEquals this.value.logical_operator "="}}selected{{/ifEquals}}>=</option>
                        <option value="!=" {{#ifEquals this.value.logical_operator "!="}}selected{{/ifEquals}}>!=</option>
                        <option value=">" {{#ifEquals this.value.logical_operator ">"}}selected{{/ifEquals}}>></option>
                        <option value=">=" {{#ifEquals this.value.logical_operator ">="}}selected{{/ifEquals}}>>=</option>
                        <option value="<" {{#ifEquals this.value.logical_operator "<"}}selected{{/ifEquals}}><</option>
                        <option value="<=" {{#ifEquals this.value.logical_operator "<="}}selected{{/ifEquals}}><=</option>
                        <option value="contains" {{#ifEquals this.value.logical_operator "contains"}}selected{{/ifEquals}}>contains</option>
                      </select>
                    </div>
                    <div class="form-group col-md-1" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-logical_value2">Value:</label>
                        <input type="text" class="form-control" id="repertoire-groups-logical_value2" placeholder="Value" value="{{this.value.logical_value}}" data-tuple="{{@index}}">
                    </div>
                    <div class="form-group col-md-2" {{#unless filter_mode}}hidden{{/unless}}>
                      <label for="repertoire-groups-count">Selected:</label>
                        <input type="text" class="form-control" id="repertoire-groups-count" value="N Repertoires" readonly>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
