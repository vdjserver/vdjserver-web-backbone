{{> vdjpipe-base-view-top}}
    <div
        class="demultiplex-tooltip"
        data-toggle="tooltip"
        data-placement="right"
        title='Note: primer files must have their type set as "Primer Sequences" to be included in this module.'
    >

<div class="row row-with-spacer">
    {{#if primerFiles}}
        <div class="col-md-6">
            <table class="table">
                <tbody>
                    <tr>
                        <td>
                            Fasta Primer File
                        </td>
                        <td>
                            <select
                                class="job-form-item"
                                id="{{inputCount}}-{{parameterType}}-primer-file"
                                name="{{inputCount}}-{{parameterType}}-primer-file"
                            >
                                {{#each primerFiles}}
                                    <option value={{value.name}}>{{value.name}}</option>
                                {{/each}}
                            </select>
                        </td>
                    </tr>

                    {{!-- NOTE: this is disabled for now until we figure out why it isn't working on the command line
                    <tr>
                        <td>
                            Discard Reads Without Primers?
                        </td>
                        <td>
                            {{#if options.required}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-required"
                                    type="checkbox"
                                    checked
                                >
                            {{else}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-required"
                                    type="checkbox"
                                >
                            {{/if}}
                        </td>
                    </tr>
                    --}}

                    <tr>
                        <td>
                            Maximum Number of Mismatches
                        </td>
                        <td>
                            {{#if options.max_mismatches}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-maximum-mismatches"
                                    type="number"
                                    value="{{options.max_mismatches}}"
                                    step="1"
                                    min="0"
                                    pattern="\d+"
                                >
                            {{else}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-maximum-mismatches"
                                    type="number"
                                    value="0"
                                    step="1"
                                    min="0"
                                    pattern="\d+"
                                >
                            {{/if}}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Trim Primer
                        </td>
                        <td>
                            {{#if options.custom_trim}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-trim-primer"
                                    type="checkbox"
                                    checked
                                >
                            {{else}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-trim-primer"
                                    type="checkbox"
                                >
                            {{/if}}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Length
                        </td>
                        <td>
                            {{#if options.length}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-element-length"
                                    type="number"
                                    value="{{options.length}}"
                                    step="1"
                                    min="0"
                                    pattern="\d+"
                                >
                            {{else}}
                                <input
                                    class="job-form-item"
                                    name="{{inputCount}}-{{parameterType}}-element-length"
                                    type="number"
                                    value="30"
                                    step="1"
                                    min="0"
                                    pattern="\d+"
                                >
                            {{/if}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-6">
            <p>
            This module locates

            {{#ifCond parameterType 'custom_j_primer_trimming'}}
                j
            {{else}}
                v
            {{/ifCond}}

            primer regions within reads.
            </p>
            <p>
                This step can be removed from the workflow template.
            </p>
        </div>
    {{else}}
        <div class="col-md-12">
            <div class="alert alert-danger">
                Warning: there are no primer files available. Please upload primer files on the project file list and set their type as "Primer Sequences".
            </div>
        </div>
    {{/if}}
</div>

{{> vdjpipe-base-view-bottom}}
