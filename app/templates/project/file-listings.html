{{#if fileListings}}
    <div class="row">
        <div class="col-md-12 table-responsive">
            <table class="table table-bordered table-headings">
                <thead>
                    <tr>
                        <th class="text-center">
                            <input id="select-all-files-checkbox" name="select-all-files-checkbox" type="checkbox">
                        </th>
                        <th class="text-center">
                            Title
                        </th>
                        <th class="text-center">
                            Pairing
                        </th>
                        <th class="text-center">
                            Last Modified
                        </th>
                        <th class="text-center">
                            Size
                        </th>
                        <th class="text-center">
                            File Origin
                        </th>
                        <th class="text-center">
                            Type
                        </th>
                        <th class="text-center">
                            Tags
                        </th>
                        <th class="text-center">
                            Read Direction
                        </th>
                    </tr>
                </thead>
                <tbody>

                    {{!-- Start Single Reads --}}
                    {{#each fileListings}}
                        <tr class="text-center">
                            <td style="vertical-align:middle">
                                {{#IfJobSelectableFileType value.name value.fileType}}
                                    <input name="file-checkbox" type="checkbox" value="{{uuid}}" class="selected-files">
                                {{else}}
                                    <input name="file-checkbox" type="checkbox" value="{{uuid}}" class="selected-files not-job-selectable">
                                {{/IfJobSelectableFileType}}
                            </td>
                            <td style="vertical-align:middle">
                                <a class="download-file" href="#" data-bypass=true data-filename="{{value.name}}" data-metadatauuid="{{uuid}}">{{value.name}}</a>
                            </td>
                            <td style="vertical-align:middle">
                                Single Read
                            </td>
                            <td style="vertical-align:middle">
                                {{FormatAgaveDate lastUpdated}}
                            </td>
                            <td style="vertical-align:middle">
                                {{GetHumanReadableFileSize value.length}}
                            </td>
                            <td style="vertical-align:middle">
                                {{#ifCond this.name "projectFile"}}
                                    Uploaded File
                                {{else}}
                                    Job: <a href="/project/{{value.projectUuid}}/jobs/{{value.jobUuid}}">{{value.jobName}}</a>
                                {{/ifCond}}
                            </td>
                            <td style="vertical-align:middle">
                                <select
                                    class="project-file-type"
                                    data-fileuuid="{{uuid}}"
                                >
                                    {{#each ../fileTypes}}
                                    <option {{ifCondSelected @index ../value.fileType}} value="{{@index}}">
                                            {{this}}
                                        </option>
                                    {{/each}}
                                </select>
                            </td>
                            <td style="vertical-align:middle">
                                <input
                                    class="project-file-tags"
                                    data-fileuuid="{{uuid}}"
                                    type="text"
                                    value="{{GetTagDisplay value.publicAttributes}}"
                                >
                            </td>
                            <td style="vertical-align:middle">
                                <select
                                    class="project-file-read-direction"
                                    data-fileuuid="{{uuid}}"
                                >
                                    <option></option>
                                    {{#each ../readDirections}}
                                        <option {{ifCondSelected this ../value.readDirection}}>{{this}}</option>
                                    {{/each}}
                                </select>
                            </td>
                        </tr>
                    {{/each}}
                    {{!-- End Single Reads --}}


                    {{!-- Start Paired Reads --}}
                    {{#each pairedReadFileListings}}
                        <tr class="text-center">
                            <td style="vertical-align:middle">
                                <input name="file-checkbox" type="checkbox" value="{{this.0.uuid}}" class="selected-files">
                            </td>
                            <td style="vertical-align:middle">
                                {{#each this}}
                                    <a class="download-file" href="#" data-bypass=true data-filename="{{value.name}}" data-metadatauuid="{{uuid}}">{{value.name}}</a>
                                {{/each}}
                            </td>
                            <td style="vertical-align:middle">
                                Paired Read
                            </td>
                            <td style="vertical-align:middle">
                                {{#each this}}
                                    {{FormatAgaveDate lastUpdated}}
                                {{/each}}
                            </td>
                            <td style="vertical-align:middle">
                                {{#each this}}
                                    {{GetHumanReadableFileSize value.length}}
                                {{/each}}
                            </td>
                            <td style="vertical-align:middle">
                                {{#each this}}
                                    {{#ifCond this.name "projectFile"}}
                                        Uploaded File
                                    {{else}}
                                        Job: <a href="/project/{{value.projectUuid}}/jobs/{{value.jobUuid}}">{{value.jobName}}</a>
                                    {{/ifCond}}
                                {{/each}}
                            </td>
                            <td style="vertical-align:middle">
                                Read-Level Data
                            </td>
                            <td style="vertical-align:middle">
                                {{#each this}}
                                    <input
                                        class="project-file-tags"
                                        data-fileuuid="{{uuid}}"
                                        type="text"
                                        value="{{GetTagDisplay value.publicAttributes}}"
                                    >
                                {{/each}}
                            </td>
                            <td style="vertical-align:middle">
                                {{#each this}}
                                    <select
                                        class="project-file-read-direction"
                                        data-fileuuid="{{uuid}}"
                                    >
                                        <option></option>
                                        {{#each ../../../readDirections}}
                                            <option {{ifCondSelected this ../value.readDirection}}>{{this}}</option>
                                        {{/each}}
                                    </select>
                                {{/each}}
                            </td>
                        </tr>
                    {{/each}}
                    {{!-- End Paired Reads --}}


                </tbody>
            </table>
        </div>
    </div>
{{else}}
    <div id="file-container" class="row">
        <div id="drag-and-drop-box" class="jumbotron-dashed-box col-md-12">

            <div id="file-drop">
                <span class="background-icon fa fa-upload"></span>

                <h2>Let's Get Started!</h2>

                <p>
                    <h5>
                        VDJServer can process raw reads (e.g. apply quality filtering), conduct germline inference using IgBlast, and provide summary output of repertoire characteristics.
                    </h5>
                </p>
                <p>
                    <h5>
                        To begin this process, upload sequence data in fastq or fasta format. Currently accepted file types are .fastq, .fasta, .fna, .fa, .qual, .gz, .bz2, and .Z.
                    </h5>
                </p>
                <p>
                    <h5>
                        You can also upload your primer sequences and barcode sequences here if you wish to identify and remove them from the raw reads prior to alignment. If you upload a barcode file, VDJserver will separate and analyze your samples for you.
                    </h5>
                </p>
                <p>
                    <h5>
                        You can drag and drop to upload data or just click here
                    </h5>
                </p>
            </div>
        </div>
        <div id="file-staging"></div>
    </div>
{{/if}}

<div id="job-submit"></div>
